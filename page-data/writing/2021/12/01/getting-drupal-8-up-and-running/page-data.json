{
    "componentChunkName": "component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx",
    "path": "/writing/2021/12/01/getting-drupal-8-up-and-running",
    "result": {"data":{"post":{"slug":"/2021/12/01/getting-drupal-8-up-and-running","title":"Getting Drupal 8 Up and Running","date":"Dec 01, 2021","tags":[{"name":"Technology","slug":"technology"},{"name":"PHP","slug":"php"},{"name":"Drupal 8","slug":"drupal-8"}],"description":"Lucky me got tasked with having to setup a local Drupal 8 environment provided by a vendor we chose to do our migration.. let's just say it wasn't fun.","canonicalUrl":null,"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Getting Drupal 8 Up and Running\",\n  \"description\": \"Lucky me got tasked with having to setup a local Drupal 8 environment provided by a vendor we chose to do our migration.. let's just say it wasn't fun.\",\n  \"date\": \"2021-12-01T00:00:00.000Z\",\n  \"tags\": [\"Technology\", \"PHP\", \"Drupal 8\"],\n  \"slug\": \"/2021/12/01/getting-drupal-8-up-and-running\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"So, we recently got a vendor (which won't be named here due to how absolutely terrible they are) to migrate our Drupal 6 site to Drupal 8.  Given that I literally knew (and probably still don't) anything about Drupal I assumed it would be a fairly straigh forward process.  I've worked with and as a vendor before, I get how things go - the games you play trying to milk more mony out of clients.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"It's a super shady practice that I couldn't stand when we attempted to do it to some clients; which makes having to deal with it on the flip side flat out annoying.\")), mdx(\"p\", null, \"Due to the lack of knowledge and training that we got transferred to us in terms of development environments, I was tasked with getting things setup myself.  Since I generally try not to do things half assed I decided to jump all in and get everything I could think of setup.\"), mdx(\"h2\", null, \"Cloning the Repository\"), mdx(\"p\", null, \"The one shining star in this is that we were responsible for maintaining the git repository where the vendor would put their changes.  First things first let's get things cloned:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"$ git clone <repsoitory>\\n\")), mdx(\"p\", null, \"which went great.\"), mdx(\"h2\", null, \"Deciding on a Development Environment\"), mdx(\"p\", null, \"So this is where things got tricky, there are so many different ways in which we can create and maintain the environment (looking through a few files I found that they were using MAMP on MacOS), but after talking to some other Drupal-ists (the fact that this is a thing) pointed me in the direction of \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.lando.dev/\"\n  }, \"Lando\"), \".\"), mdx(\"h3\", null, \"Lando\"), mdx(\"p\", null, \"TLDR; after getting this environment setup, it was unusably slow on Windows so I scratched it, continue to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"#mamp\"\n  }, \"#mamp\"), \".\"), mdx(\"p\", null, \"Although we aren't using it, here's the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".lando.yml\"), \" file that got things up and running:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"name: sc-drupal8\\nrecipe: drupal8\\nexcludes:\\n  - vendor\\nconfig:\\n  webroot: docroot\\n  composer_version: '1.10.17'\\ntooling:\\n  drush:\\n    service: appserver\\n    cmd: php /app/vendor/drush/drush/drush --root=/app/docroot      \\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Would have been solid I think on MacOS.\")), mdx(\"h3\", null, \"MAMP\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"I'll be honest, the first time I attempted to set this up I used XAAMP which didn't go well.\")), mdx(\"p\", null, \"Mamp seemed to be pretty straight forward, it came with a little bit tighter installation and configuration with XAAMP and had a bit easier to read documentation.   \"), mdx(\"h4\", null, \"Installing MAMP\"), mdx(\"p\", null, \"There wasn't really much issue here with installing MAMP, although to make life easier I chose to specify an exact version in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"README\"), \" in order to hopefully stop some headaches later on.\"), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.mamp.info/en/downloads/\"\n  }, \"Download MAMP\")), mdx(\"p\", null, \"And run through the installation process, it was pretty straight forward.\"), mdx(\"h4\", null, \"Configuring MAMP\"), mdx(\"p\", null, \"Configuring mamp was pretty easy as well:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"There was only one Apache\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"There was only one Mysql\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"We chose to work with \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"7.4.16\"), \" version of PHP\")), mdx(\"p\", null, \"Some minor updates were required:\"), mdx(\"h5\", null, \"MYSQL\"), mdx(\"p\", null, \"Open up the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"C:\\\\MAMP\\\\conf\\\\mysql\\\\my.ini\"), \" file and make the following changes:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"# Need to be able to restore the test/uat database locally\\nmax_allowed_packet = 64M\\n\")), mdx(\"h5\", null, \"PHP\"), mdx(\"p\", null, \"There are two configuration files that need to be updated together, this seems like a specific to Windows thing that I haven't yet found a work around for.  It's not to bad to copy and paste a file, so there wasn't too much effort put in:\"), mdx(\"p\", null, \"Both \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"C:\\\\MAMP\\\\conf\\\\php\\\\7.4.16\\\\php.ini\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"C:\\\\MAMP\\\\bin\\\\php\\\\php7.4.16\\\\php.ini\"), \" need to be modified.  The reasoning for this is that running \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"composer\"), \" and php from the command line uses the version configured in the Environment \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Path\"), \" while the Apache version uses the one located in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"bin\"), \" folder.  Meh.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"\\n# Get debugging available\\n[xdebug]\\nzend_extension = \\\"C:\\\\MAMP\\\\bin\\\\php\\\\php7.4.16\\\\ext\\\\php_xdebug.dll\\\"\\nxdebug.mode = debug\\nxdebug.start_with_request=yes\\n\\nmax_execution_time = 600      ; Maximum execution time of each script, in seconds\\nmax_input_time = 60           ; Maximum amount of time each script may spend parsing request data\\n;max_input_nesting_level = 64 ; Maximum input variable nesting level\\nmemory_limit = 1024M          ; Maximum amount of memory a script may consume (128MB)\\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"If you follow a lot of the tutorials online for getting XDebug working, you'll run into some issues in your log.  So a heads up to always check it\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"Xdebug: [Config] The setting 'xdebug.remote_enable' has been renamed, see the upgrading guide at https://xdebug.org/docs/upgrade_guide#changed-xdebug.remote_enable (See: https://xdebug.org/docs/errors#CFG-C-CHANGED)\\n\")), mdx(\"h5\", null, \"Apache\"), mdx(\"p\", null, \"Becuase of Drupals cookies and Chrome inability to handle \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"HttpOnly, Secure=None\"), \" cookies anymore, you won't be able to login using Chrome unless you make SSL/HTTPS available for your local environment.  On Lando this was done for you using the proxy, it was glorious, but now that we have to do it manually it's a bit of a process.  There are tons of tutorials around on how to generate local keys, so I'm just going to show the MAMP configuration:\"), mdx(\"p\", null, \"Within \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"C:\\\\MAMP\\\\conf\\\\apache\\\\httpd.conf\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"LoadModule ssl_module modules/mod_ssl.so\\nInclude /MAMP/conf/apache/httpd-ssl.conf\\n\")), mdx(\"p\", null, \"And the new file \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"C:\\\\MAMP\\\\conf\\\\apache\\\\httpd-ssl.conf\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"Listen 443\\n\\n<VirtualHost *:443>\\n    ServerName localhost:443    \\n    SSLEngine on\\n    SSLCertificateFile \\\"/MAMP/conf/ssl/server.crt\\\"\\n    SSLCertificateKeyFile \\\"/MAMP/conf/ssl/server.key\\\"\\n</VirtualHost>\\n\")), mdx(\"h2\", null, \"Drupal 8 Configuration\"), mdx(\"p\", null, \"Now that we've got the MAMP environment setup and ready to go, we need to continue down the Drupal 8 path.\"), mdx(\"h3\", null, \"Compser Install\"), mdx(\"p\", null, \"It looks like the vendor followed some standard of best practices (from looking around) so we need to run the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"composer install\"), \" command to get dependencies.  While doing this I ran into one massive gotcha that blew my mind.  Essentially we were provided with a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"composer.json\"), \" file that:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Wasn't locked to specific versions\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Had some dependencies in \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"dev\"), \" version\")), mdx(\"p\", null, \"Both of which had issues of their own and was something that coming from a Maven background just boggled my mind.  It resulted in different versions being on different installs for different developers and provide with a week or so long of attempting to find out why the dev dependencies were missing (which now looking back seems so obvious), but you can read about it here \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://drupal.stackexchange.com/questions/302666/trait-drupal-entity-form-entityduplicateformtrait-not-found-while-setting-up/302959#302959\"\n  }, \"https://drupal.stackexchange.com/questions/302666/trait-drupal-entity-form-entityduplicateformtrait-not-found-while-setting-up/302959#302959\"), \".\"), mdx(\"p\", null, \"TLDR; manually delete all \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dev\"), \" version dependencies before running \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"composer install\"), \" so that they can be checked out as git submodules correctly.\"), mdx(\"h3\", null, \"Drupal Settings\"), mdx(\"p\", null, \"Another fun thing provided in the project were the setting file(s).  We were given (in git) two files:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"settings.php\"), \" \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"settings.local.php\"), \" \")), mdx(\"p\", null, \"which required us to copy/overwrite \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"settings.php\"), \" with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"settings.local.php\"), \" which then turned out to cause some problems with the deployment and development environments of my co-workers.  After looking around I found that the better practice was to:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Have a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"settings.php\"), \" file that read \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"settings.local.php\"), \" file when it exists (which had been completely removed)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Have the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"settings.local.php\"), \" file not be committed to git so that it can be managed using the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"example.settings.local.php\"), \" file\")), mdx(\"p\", null, \"Again so much confusion on why these weren't being followed already.  After looking at the original example file it was pretty obvious this was meant to be in there.  I'm assuming due to how Aquia (or whatever the companies called) deploys things it needed to be changed?\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"/**\\n * Load local development override configuration, if available.\\n *\\n * Use settings.local.php to override variables on secondary (staging,\\n * development, etc) installations of this site. Typically used to disable\\n * caching, JavaScript/CSS compression, re-routing of outgoing emails, and\\n * other things that should not happen on development and testing sites.\\n *\\n * Keep this code block at the end of this file to take full effect.\\n */\\nif (file_exists($app_root . '/' . $site_path . '/settings.local.php')) {\\n  include $app_root . '/' . $site_path . '/settings.local.php';\\n} \\n\")), mdx(\"h2\", null, \"Up and At Them!!\"), mdx(\"p\", null, \"After this you should be able to connect to:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"http://localhost\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"https://localhost\"))), mdx(\"p\", null, \"and be able to move around.  \"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"I skipped the database/install section since it's pretty straight forward\")), mdx(\"h2\", null, \"Debugging\"), mdx(\"p\", null, \"Now that the site is up and running we need to be able to debug the application.  We're kind of split here on the IDE to use so I needed to get debugging working in both VSCode and Eclipse.\"), mdx(\"h3\", null, \"Visual Studio Code\"), mdx(\"p\", null, \"Create the default \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"launch.json\"), \" configuration\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"{\\n    // Use IntelliSense to learn about possible attributes.\\n    // Hover to view descriptions of existing attributes.\\n    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\\n    \\\"version\\\": \\\"0.2.0\\\",\\n    \\\"configurations\\\": [\\n        {\\n            \\\"name\\\": \\\"Listen for Xdebug\\\",\\n            \\\"type\\\": \\\"php\\\",\\n            \\\"request\\\": \\\"launch\\\",\\n            \\\"port\\\": 9003\\n        }        \\n    ]\\n}\\n\")), mdx(\"p\", null, \"and then run the debugger.  You should be able to place a breakpoint anywhere in the application (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.php\"), \" although I learned that was a bad choice in Eclipse) and have the breakpoint hit.\"), mdx(\"h3\", null, \"Eclipse\"), mdx(\"p\", null, \"Eclipse was a little more painful to setup, although not terrible.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Open \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Properties > PHP > Debug > Debuggers\"), \" \")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Debug Port = \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"9003\"))), mdx(\"ol\", {\n    \"start\": 2\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Open \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Properties > PHP > Installed PHPs\"), \" \")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Add the appropriate PHP\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Select the appropriate Debugger (below)\")), mdx(\"ol\", {\n    \"start\": 3\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Open \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Properties > PHP > Servers\"))), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Edit the Default PHP Web Server\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Point \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"docroot\"), \" to the appropriate folder\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Ensure the Debugger \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"XDebug\"), \" is selected with the port \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"9003\"))), mdx(\"ol\", {\n    \"start\": 4\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Create a Debug Configuration\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Open up \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Debug Configurations\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Select \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"PHP web Application\"), \" and click \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"New\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"On the Server tab select \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Default PHP Web Server\"), \" and the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/sc-drupal8/docroot/index.php\"), \" file.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"On the Debugger tab confirm \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"XDebug\"), \" is selected\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Eclipse debugging will open a new Debugger thread for each request made (css, images, etc) if you're debugging the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.php\"), \" file this blows things up pretty quickly.  There are a few configuration options with regards to XDebug that I haven't quite figured out how to tone down.\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"So, we recently got a vendor (which won't be named here due to how absolutely terrible they are) to migrate our Drupal 6 site to Drupal…","timeToRead":4,"banner":null}},"pageContext":{"slug":"/2021/12/01/getting-drupal-8-up-and-running","formatString":"MMM DD, yyyy"}},
    "staticQueryHashes": ["2744905544","3090400250","318001574"]}